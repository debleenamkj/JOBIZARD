<div class="parent-div">
    <section class="header-section">
        <h1 style="width: 100%; margin-bottom: 5px;
            border-radius: 4px;
            padding: 16.5px;
            color: white; text-align: center;
            font-size: xx-large; font-weight: 600;
            background-image: linear-gradient(to right, rgb(110,37,134),rgb(177,23,132) );">
            Get Insight On Companies
        </h1>

        <div>
            <form [formGroup]="companyForm" class="search-form">
                <mat-form-field class="search-bar">
                    <mat-label style="color: black; font-size:18px; font-weight: 500;">Search by Company name</mat-label>
                    <input type="search" style="font-size: 20px" matInput formControlName="companyGroup"
                        [matAutocomplete]="autoGroup">
                    <mat-autocomplete #autoGroup="matAutocomplete">
                        <mat-optgroup *ngFor="let group of companyGroupOptions | async" [label]="group.letter">
                            <mat-option *ngFor="let name of group.names" style="color: #4E1B5F; font-weight: 700;" [value]="name">
                                {{name}}
                            </mat-option>
                        </mat-optgroup>
                    </mat-autocomplete>
                    <button (click)="companyForm.controls['companyGroup'].setValue('');"
                        *ngIf="companyForm.controls['companyGroup'].value" matSuffix mat-icon-button>
                        <i class="fa-xl fa-solid fa-xmark"></i>
                    </button>
                </mat-form-field>
                <button mat-icon-button (click)="querySearch()" class="search-button">
                    <i class="fa-xl fa-solid fa-magnifying-glass"></i>
                </button>
            </form>
        </div>
    </section>
    <mat-paginator [length]="companies.length" [pageSize]="4" [pageSizeOptions]="[1,2,3,4,5,6,7,8]"
        (page)="reviewPageChange($event)" aria-label="Select page">
    </mat-paginator>

    <section class="review-section" style="position: relative;">
        <mat-card *ngFor="let company of companiesSlice" class="review-card">
            <mat-card-header class="review-header">
                <div class="mat-title">
                    <mat-card-title style=" font-size: 21px; line-height: 21px; height: fit-content;">
                        {{company.companyName}}
                    </mat-card-title>
                    <mat-card-subtitle>
                        <i class="fa-solid fa-star" style="position: absolute; left: 0%;"></i>
                    </mat-card-subtitle>
                </div>
                <img [src]="company.retrievedImage" style="width: 120px; height: 120px; object-fit: contain;">
                <mat-card-actions>
                    <button mat-raised-button (click)="openReviewForm(company)">Write Review</button>
                </mat-card-actions>
            </mat-card-header>
        </mat-card>
    </section>
    <section class="review-section" style="position: relative;">
        <mat-card *ngFor="let company of companiesSlice" class="review-card">
            <mat-card-header class="review-header">
                <div class="mat-title">
                    <mat-card-title style=" font-size: 21px; line-height: 21px; height: fit-content;">
                        {{company.companyName}}
                    </mat-card-title>
                    <mat-card-subtitle>
                        <i class="fa-solid fa-star" style="position: absolute; left: 0%;"></i>
                    </mat-card-subtitle>
                </div>
                <img [src]="company.retrievedImage" style="width: 120px; height: 120px; object-fit: contain;">
                <mat-card-actions>
                    <button mat-raised-button (click)="openReviewForm(company)">Write Review</button>
                </mat-card-actions>
            </mat-card-header>
        </mat-card>
    </section>
    

    <h1 class="title">Company Ratings</h1>
    <mat-paginator [length]="companies.length" [pageSize]="4" [pageSizeOptions]="[1,2,3,4,5,6,7,8]"
        (page)="companyPageChange($event)" aria-label="Select page">
    </mat-paginator>
    <section class="review-section">
        <mat-card *ngFor="let company of companiesSlice" class="review-card">
            <mat-card-header class="review-header">
                <div class="mat-title">
                    <mat-card-title class="company-name">
                        {{company.companyName}}
                    </mat-card-title>
                    <mat-card-subtitle style="padding: 0px 5px; font-size: 20px; width: fit-content; ">
                        <i style="color: orange;" class="fa-sm fa-solid fa-star"></i>
                        4.8
                    </mat-card-subtitle>
                </div>
                <img id="company-logo" [src]="company.retrievedImage"
                    style="width: 120px; height: 120px; object-fit: contain;">
                <mat-card-actions>
                    <button mat-raised-button (click)="openReviewForm(company)">Write Review</button>
                </mat-card-actions>
            </mat-card-header>
        </mat-card>
    </section>
    
</div>


<!-- <mat-grid-list cols="5" gutterSize="10px" rowHeight="200px">
            <mat-grid-tile *ngFor="let company of companies" style="background-color: white;">
                <mat-card-header style="width:300px;">
                    <!-- <div mat-card-avatar class="example-header-image"></div>
                    <mat-card-title>
                        {{company.companyName}}
                    </mat-card-title>
                    <mat-card-subtitle>
                        {{company.cin}}
                    </mat-card-subtitle>
                </mat-card-header>
                <div style="display: flex; flex-direction: column; align-items: center;">
                    <img [src]="company.retrievedImage" style="width: 150px; height: 150px; object-fit: contain;">
                    <mat-card-actions>
                        <button mat-raised-button (click)="openReviewForm($event)">Write Review</button>
                    </mat-card-actions>
                </div>
            </mat-grid-tile>
        </mat-grid-list> -->